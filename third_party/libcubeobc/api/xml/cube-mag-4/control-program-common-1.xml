<?xml version="1.0" encoding="utf-8"?>
<NodeDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <IsModule>true</IsModule>
  <Name>CubeMag</Name>
  <CodeName>CubeMagControlProgramCommon</CodeName>
  <InterfaceVersion>1</InterfaceVersion>
  <CanLog>false</CanLog>

	<!-- ****************** CONFIGURATION ****************** -->

	<Ttcs CanSet="true" CanGet="true" CodeName="Config" DisplayName="CubeMag Config" Description="CubeMag Config Items" Len="4" PartOfStartItem="0" PartOfNumItems="0" Group="Configuration">
		<Item CodeName="PrimaryMagnetometerPref"	DisplayName="Prefered Primary Magnetometer"		Description="The Prefered Primary Magnetometer"															BitOffset="0" BitLength="4"		ValueType="Enumeration"			EnumerationName="MagType" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="PrimaryMagnetometerCurr"	DisplayName="Current Primary Magnetometer"		Description="The Magnetometer to set as the primary"													BitOffset="4" BitLength="4"		ValueType="Enumeration"			EnumerationName="MagType" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="DeployTimeout"				    DisplayName="Deploy Timeout"				Description="Depoyment Timeout. Applied to Burn Wire"													BitOffset="8" BitLength="16"	ValueType="UnsignedInteger" 	EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="mS" RangeMin="2000" RangeMax="30000" />
		<Item CodeName="PrimaryAutoSelect"		    DisplayName="Primary Auto-Select"		        Description="Allow the firmware to change the primary magnetometer based on error conditions"			BitOffset="24" BitLength="1"	ValueType="Boolean"				EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="1" />
	</Ttcs>

	<Ttcs CanSet="true" CanGet="true" CodeName="MmcConfig" DisplayName="MMC Magnetometer Config" Description="MMC Magnetometer Specific Config" Len="12" PartOfStartItem="0" PartOfNumItems="0" Group="Configuration">
		<Item CodeName="AutoSample"         DisplayName="MMC Auto-Sample"		    	Description="MMC Auto-Sample Enable/Disable"									BitOffset="0" BitLength="1"		ValueType="Boolean"					EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="AutoSamplePeriod"	DisplayName="MMC Sample Period"				Description="MMC Auto Sample Period"											BitOffset="1" BitLength="7"		ValueType="Enumeration"			EnumerationName="SamplePeriod" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="SampleFilterType"	DisplayName="MMC Sample Filter Type"		Description="MMC Sample Filter Type"	                            			BitOffset="8" BitLength="4"	  ValueType="Enumeration"   EnumerationName="FilterType" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="SampleFilterOrder"	DisplayName="MMC Sample Filter Order"		Description="MMC Sample Butterworth filter order"	                			BitOffset="12" BitLength="4"	  ValueType="Enumeration"   EnumerationName="FilterOrder" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="SampleFilterDepth"	DisplayName="MMC Sample Filter Depth"		Description="MMC Sample Filter Depth when using Simple Averaging"				BitOffset="16" BitLength="8"		ValueType="UnsignedInteger"			EnumerationName="SamplePeriod" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="SingleSampleTime"	DisplayName="MMC Single-Sample Time"		Description="MMC Sample Duration when Auto-Sample is disabled"					BitOffset="24" BitLength="5"		ValueType="Enumeration"			EnumerationName="SampleDuration" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="SampleBusyAction"	DisplayName="MMC Sample Busy Action"		Description="MMC Action to take when sample is busy when requested"				BitOffset="29" BitLength="3"		ValueType="Enumeration"			EnumerationName="SampleBusy" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="MaxErrorsMag"	    DisplayName="MMC Max Errors Magnetometer"	Description="MMC Maximum number of allowed megnetometer measurement errors"		BitOffset="32" BitLength="32"		ValueType="UnsignedInteger" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="MaxErrorsTmp"	    DisplayName="MMC Max Errors Temperature"	Description="MMC Maximum number of allowed temperature measurement errors"		BitOffset="64" BitLength="32"		ValueType="UnsignedInteger" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
	</Ttcs>

	<!-- ****************** CALIBRATION ****************** -->

	<Ttcs CanSet="true" CanGet="true" CodeName="MmcCalibration" DisplayName="MMC Calibration Parameters" Description="MMC Magnetometer Calibration Parameters" Len="48" PartOfStartItem="0" PartOfNumItems="0" Group="Calibration">
		<Item CodeName="Xd1"       DisplayName="X-d1"			Description="X-Axis: d1"		BitOffset="0"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Xd2"       DisplayName="X-d2"			Description="X-Axis: d2"		BitOffset="32"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Xs1"       DisplayName="X-s1"			Description="X-Axis: s1"		BitOffset="64"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Xs2"       DisplayName="X-s2"			Description="X-Axis: s2"		BitOffset="96"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Yd1"       DisplayName="Y-d1"			Description="Y-Axis: d1"		BitOffset="128"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Yd2"       DisplayName="Y-d2"			Description="Y-Axis: d2"		BitOffset="160"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Ys1"       DisplayName="Y-s1"			Description="Y-Axis: s1"		BitOffset="192"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Ys2"       DisplayName="Y-s2"			Description="Y-Axis: s2"		BitOffset="224"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Zd1"       DisplayName="Z-d1"			Description="Z-Axis: d1"		BitOffset="256"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Zd2"       DisplayName="Z-d2"			Description="Z-Axis: d2"		BitOffset="288"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Zs1"       DisplayName="Z-s1"			Description="Z-Axis: s1"		BitOffset="320"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
		<Item CodeName="Zs2"       DisplayName="Z-s2"			Description="Z-Axis: s2"		BitOffset="352"	BitLength="32"	ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-100000" RangeMax="100000" />
	</Ttcs>

	<!-- ****************** APPLICATION ****************** -->

	<Ttcs CanSet="false" CanGet="true" CodeName="State" DisplayName="State" Description="All Service States" Len="3" PartOfStartItem="0" PartOfNumItems="0" Group="Application">
		<Item CodeName="MagState"			DisplayName="MagSvc State"		Description="CubeMag Service State"					BitOffset="0" BitLength="8"		ValueType="Enumeration" EnumerationName="MagState" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="PrimaryMagState"	DisplayName="Primary Mag State"	Description="Primary Magnetometer State"				BitOffset="8" BitLength="8"		ValueType="Enumeration" EnumerationName="MntState" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="RedMagState"	DisplayName="Red Mag State"		Description="Redundant Magnetometer State"	BitOffset="16" BitLength="8"	ValueType="Enumeration" EnumerationName="MntState" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
	</Ttcs>

	<Ttcs CanSet="true" CanGet="false" CodeName="SamplePrimary" DisplayName="Sample Primary" Description="Trigger a single Sample the Primary Magnetometer (auto-sample == OFF)" Len="0" PartOfStartItem="0" PartOfNumItems="0" Group="Application">
	</Ttcs>

	<Ttcs CanSet="false" CanGet="true" CodeName="PrimaryMagMeasurement" DisplayName="Primary Magnetometer Measurement" Description="Primary Magnetometer Measurement" Len="13" PartOfStartItem="0" PartOfNumItems="0" Group="Application">
		<Item CodeName="X_axis" DisplayName="X_axis" Description="X_axis" BitOffset="0" BitLength="32" ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="nT" RangeMin="-800000" RangeMax="800000" />
		<Item CodeName="Y_axis" DisplayName="Y_axis" Description="Y_axis" BitOffset="32" BitLength="32" ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="nT" RangeMin="-800000" RangeMax="800000" />
		<Item CodeName="Z_axis" DisplayName="Z_axis" Description="Z_axis" BitOffset="64" BitLength="32" ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="nT" RangeMin="-800000" RangeMax="800000" />
		<Item CodeName="DataValid" DisplayName="Data Valid" Description="Is Data Valid" BitOffset="96" BitLength="1" ValueType="Boolean" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
	</Ttcs>

	<Ttcs CanSet="false" CanGet="true" CodeName="PrimaryMagMeasurementRaw" DisplayName="Primary Magnetometer Measurement Raw" Description="Unfiltered last Primary Magnetometer Measurement" Len="13" PartOfStartItem="0" PartOfNumItems="0" Group="Application">
		<Item CodeName="X_axis" DisplayName="X_axis" Description="X_axis" BitOffset="0" BitLength="32" ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="nT" RangeMin="-800000" RangeMax="800000" />
		<Item CodeName="Y_axis" DisplayName="Y_axis" Description="Y_axis" BitOffset="32" BitLength="32" ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="nT" RangeMin="-800000" RangeMax="800000" />
		<Item CodeName="Z_axis" DisplayName="Z_axis" Description="Z_axis" BitOffset="64" BitLength="32" ValueType="FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="nT" RangeMin="-800000" RangeMax="800000" />
		<Item CodeName="DataValid" DisplayName="Data Valid" Description="Is Data Valid" BitOffset="96" BitLength="1" ValueType="Boolean" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
	</Ttcs>

	<!-- ****************** HOUSEKEEPING ****************** -->

	<Ttcs CanSet="false" CanGet="true" CodeName="PrimaryMagTemp" DisplayName="Primary Magnetometer Temperature" Description="Main Magnetometer Measurement" Len="4" PartOfStartItem="0" PartOfNumItems="0" Group="">
		<Item CodeName="Temp" DisplayName="Temperature" Description="Temperature" BitOffset="0" BitLength="32" ValueType = "FloatingPoint" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="-75" RangeMax="150" />
	</Ttcs>

	<Ttcs CanSet="false" CanGet="true" CodeName="PrimaryMagDiagnostics" DisplayName="Primary Magnetometer Diagnostics" Description="Primary Magnetometer Diagnostics" Len="16" PartOfStartItem="0" PartOfNumItems="0" Group="Housekeeping">
		<Item CodeName="lastErrorMag"		DisplayName="Last Error Magnetometer"			Description="Last Error Code from magnetometer measurement"		BitOffset="0"	BitLength="32"	ValueType="UnsignedInteger" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="errorCountMag"		DisplayName="Error Count Magnetometer"			Description="Error Counter for megnetometer measurement"		BitOffset="32" BitLength="32"	ValueType="UnsignedInteger" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="lastErrorTmp"		DisplayName="Last Error Temperature"			Description="Last Error Code from temperature measurement"		BitOffset="64"	BitLength="32"	ValueType="UnsignedInteger" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
		<Item CodeName="errorCountTmp"		DisplayName="Error Count Temperature"			Description="Error Counter for temperature measurement"			BitOffset="96" BitLength="32"	ValueType="UnsignedInteger" EnumerationName="" CalibrationUserToRaw="" CalibrationRawToUser="" MeasurementUnit="" RangeMin="0" RangeMax="0" />
	</Ttcs>

  <!-- ****************** ENUMERATIONS ****************** -->

	<!-- !!! app-specific ID's should start from the mid-point (64 TC & 192 TLM) and should increment & decrement towards the common ID's !!! -->

	<!-- TC -->
  
	<TtcIds TtcName="MmcConfig"									GetId="255" SetId="61" LogId="0" />
	<TtcIds TtcName="SamplePrimary"								GetId="255" SetId="67" LogId="0" />
	<TtcIds TtcName="Config"									GetId="255" SetId="60" LogId="0" />
	<TtcIds TtcName="MmcCalibration"							GetId="255" SetId="68" LogId="0" />

	<!-- TLM -->

	<TtcIds TtcName="MmcConfig"									GetId="196" SetId="255" LogId="0" />
  	<TtcIds TtcName="State"										GetId="188" SetId="255" LogId="0" />
  	<TtcIds TtcName="PrimaryMagMeasurement"						GetId="197" SetId="255" LogId="0" />
	<TtcIds TtcName="PrimaryMagMeasurementRaw"					GetId="187" SetId="255" LogId="0" />
  	<TtcIds TtcName="PrimaryMagTemp"							GetId="198" SetId="255" LogId="0" />
	<TtcIds TtcName="Config"									GetId="186" SetId="255" LogId="0" />
	<TtcIds TtcName="PrimaryMagDiagnostics"						GetId="199" SetId="255" LogId="0" />
	<TtcIds TtcName="MmcCalibration"							GetId="185" SetId="255" LogId="0" />

	<!-- ****************** GLOBAL ENUMS ****************** -->
  	<GlobalEnums>
    	<string>cube-mag-4/control-program-common-enums-1.xml</string>
  	</GlobalEnums>

</NodeDefinition>
